<div class="card">
    <h3 class="text-2xl font-bold mb-4">Write a Review</h3>
    <form [formGroup]="reviewForm" (ngSubmit)="submitReview()">
        <div class="form-group">
            <label class="form-label">Your Rating *</label>
            <div class="flex items-center space-x-2">
                <button *ngFor="let i of [1,2,3,4,5]" type="button" (click)="setRating(i)"
                    (mouseenter)="setHoveredRating(i)" (mouseleave)="resetHoveredRating()"
                    class="text-4xl transition-all transform hover:scale-110 focus:outline-none">
                    <span [class.rating-star]="i <= getDisplayRating()"
                        [class.rating-star-empty]="i > getDisplayRating()">â˜…</span>
                </button>
                <span *ngIf="selectedRating > 0" class="ml-4 text-gray-600">
                    {{ selectedRating }} of 5 stars
                </span>
            </div>
            <div *ngIf="reviewForm.get('rating')?.invalid && reviewForm.get('rating')?.touched" class="error-message">
                Please select a rating
            </div>
        </div>

        <div class="form-group">
            <label class="form-label">Your Comment (Optional)</label>
            <textarea formControlName="comment" class="input" rows="4"
                placeholder="Share your experience with this mechanic..."></textarea>
            <p class="text-sm text-gray-500 mt-1">Help other customers by sharing your experience</p>
        </div>

        <div class="flex space-x-4">
            <button type="submit" [disabled]="reviewForm.invalid"
                class="btn btn-primary disabled:opacity-50 disabled:cursor-not-allowed">
                Submit Review
            </button>
            <button type="button" (click)="cancel()" class="btn btn-outline">
                Cancel
            </button>
        </div>
    </form>
</div>